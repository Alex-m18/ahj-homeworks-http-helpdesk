!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){var i=n(1),a=n(2);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1},o=(i(a,r),a.locals?a.locals:{});t.exports=o},function(t,e,n){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},i=[],a=0;a<t.length;a++){var r=t[a],c=e.base?r[0]+e.base:r[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=s(u),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:u,updater:v(h,e),references:1}),i.push(u)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,n,i){var a=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var r=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function f(t,e,n){var i=n.css,a=n.media,r=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var m=null,p=0;function v(t,e){var n,i,a;if(e.singleton){var r=p++;n=m||(m=l(e)),i=h.bind(null,n,r,!1),a=h.bind(null,n,r,!0)}else n=l(e),i=f.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var a=s(n[i]);o[a].references--}for(var r=c(t,e),l=0;l<n.length;l++){var u=s(n[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=r}}}},function(t,e,n){var i=n(3),a=n(4),r=n(5),o=n(6),s=n(7),c=n(8);e=i(!1);var l=a(r),u=a(o),d=a(s),h=a(c);e.push([t.i,"* {\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  line-height: 1.2;\n  font-family: 'Roboto', sans-serif;\n  color: #101010;\n  text-align: left;\n  background-color: snow;\n  margin-left: 1.25em;\n  margin-top: 1.25em;\n}\n\n.help_desk_widget {\n  text-decoration: none;\n  position: relative;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  width: 47.25em;\n  height: auto;\n  padding: .25em;\n  border: 1px solid silver;\n  border-radius: .5em;\n}\n\na {\n  text-decoration: none;\n}\n\n.ticket_add_btn {\n  text-align: center;\n  height: 1.2em;\n  padding: 0.5em .75em;\n  margin: .25em 0 .75em;\n  border: 1px solid grey;\n  border-radius: .5em;\n  background-color: LightYellow;\n  transition-duration: 0.1s;\n\n}\n\n.cancel_btn:hover,\n.ok_btn:hover,\n.ticket_add_btn:hover {\n  color: white;\n  box-shadow: 0 6px 8px 0 rgba(0, 0, 0, 0.24), 0 8px 25px 0 rgba(0, 0, 0, 0.19);\n  cursor: pointer;\n}\n\n.ok_btn:hover,\n.ticket_add_btn:hover {\n  background-color: #4CAF50;\n}\n\n.cancel_btn:hover {\n  background-color: red;\n}\n\n.tickets_area {\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  margin: auto;\n}\n\n.ticket {\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: flex-start;\n  /*  align-items: flex-start;*/\n  width: 100%;\n  height: auto;\n  text-align: center;\n  margin: 0.1em;\n  border: 1px solid grey;\n  background-color: beige;\n}\n\n.ticket_main {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  padding: .25em 0;\n}\n\n.ticket_description {\n  margin-bottom: 0.1em;\n}\n\n\n.ticket_status,\n.ticket_edit,\n.ticket_delete {\n  width: 2.2em;\n  height: 2.05em;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  transition-duration: 0.1s;\n  margin: 0 .25em;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.ticket_status:hover,\n.ticket_edit:hover,\n.ticket_delete:hover {\n  box-shadow: 0 6px 8px 0 rgba(0, 0, 0, 0.24), 0 8px 25px 0 rgba(0, 0, 0, 0.19);\n}\n\n.ticket_add_btn:active,\n.ticket_status:active,\n.ticket_edit:active,\n.ticket_delete:active,\n.close:active,\n.cancel_btn:active,\n.ok_btn:active {\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24), 0 2px 2px 0 rgba(0, 0, 0, 0.19);\n}\n\n.ticket_status {\n  background-image: url("+l+");\n}\n\n.ticket_status.checked {\n  background-image: url("+u+");\n}\n\n.ticket_edit {\n  background-image: url("+d+");\n}\n\n.ticket_delete {\n  background-image: url("+h+");\n}\n\n.ticket_name {\n  width: 31em;\n  height: auto;\n  text-align: left;\n  padding: .25em;\n  /*  border: 1px solid red;*/\n}\n\n.ticket_description {\n/*  display: block;*/\n  /*\n  flex-flow: row wrap;\n  justify-content: flex-start;\n  align-content: flex-start;\n*/\n  width: 29.1em;\n  height: auto;\n  text-align: left;\n  padding: .25em;\n  margin-left: 2.65em;\n  padding: .25em;\n  background-color: beige;\n  /*  border: 1px solid grey;*/\n  display: none;\n}\n\n.ticket_description.show {\n  display: block;\n}\n\n.ticket_time_stamp {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: center;\n  align-content: center;\n  width: 8.4em;\n  height: auto;\n  text-align: right;\n  padding: .25em;\n}\n\n.ticket_action {\n  width: 7em;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n  flex-direction: row;\n  text-align: center;\n  align-items: center;\n  margin: 0;\n}\n\n/* End help_desk_widget */\n\n\n/* Start modal form */\n\n\n.modal {\n  position: fixed;\n  top: 0; \n   right: 0; \n   bottom: 0; \n   left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 99999;\n  -webkit-transition: opacity .4s ease-in;\n  -moz-transition: opacity .4s ease-in;\n  transition: opacity .4s ease-in;\n  display: none;\n  pointer-events: none;\n}\n\n.modal.show { \n  display: block;\n  pointer-events: auto;\n}\n\n.modal > div {\n  width: 30.75em;\n  height: auto;\n  position: relative;\n  margin: 15% auto;\n  padding: .5em 1.25em;\n  border: .125em solid grey;\n  border-radius: 1em;\n  background: #fff;\n  background: -moz-linear-gradient(#fff, #999);\n  background: -webkit-linear-gradient(#fff, #999);\n  background: -o-linear-gradient(#fff, #999);\n}\n\n.close_btn {\n  background: #606061;\n  color: #FFFFFF;\n  line-height: 1.5625em;\n  position: absolute;\n  right: -.75em;\n  text-align: center;\n  top: -.625em;\n  width: 1.5em;\n  text-decoration: none;\n  font-weight: bold;\n  -webkit-border-radius: .75em;\n  -moz-border-radius: .75em;\n  border-radius: .75em;\n  -moz-box-shadow: .0625em .0625em .1875em #000;\n  -webkit-box-shadow: .0625em .0625em .1875em #000;\n  box-shadow: .0625em .0625em .1875em #000;\n}\n\n.close:hover {\n  background: #ff0000;\n}\n\n.title {\n  text-align: center;\n}\n\n.task_input {\n  width: 100%;\n  height: auto;\n}\n\n.task_name_title,\n.task_description_title {\n  font-weight: bold;\n}\n\n.task_name,\n.task_description {\n  width: 98%;\n  height: auto;\n  padding: .25em;\n  margin-top: .125em;\n  margin-bottom: .5em;\n  font-size: 1em;\n  border: 1px solid grey;\n}\n\n.modal_footer {\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-end;\n  align-content: center;\n  width: 100%;\n  height: auto;\n  padding: .25em;\n}\n\n.cancel_btn,\n.ok_btn {\n  text-align: center;\n  /* height: 1.2em; */\n  padding: 0.5em .75em;\n  border: 1px solid grey;\n  border-radius: .5em;\n  background-color: LightYellow;\n  transition-duration: 0.1s;\n}\n\n.ok_btn {\n  margin-left: 1em;\n}\n\n.confirm_modal {\n  /* height: 2em; */\n  align-content: center;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var a=(o=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),r=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([a]).join("\n")}var o,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(i)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);i&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},function(t,e,n){"use strict";n.r(e),e.default=n.p+"534489447ee78fe9dd53ca3b7a9839d7.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"f805e53124f6ae4e2b8e00f5c22f1439.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"20f0bf29ebc7d7d0f60acd38e1334b69.svg"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"bc93c41f783218a15aacdb668884ead9.svg"},function(t,e,n){"use strict";n.r(e);n(0);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new XMLHttpRequest;e.addEventListener("readystatechange",(function(){4===e.readyState&&e.status>=200&&e.status<300&&t.callback.call(null,null,e.response)})),e.responseType=t.responseType?t.responseType:"json";var n=new URL(t.url);if(["GET","DELETE"].includes(t.method)){if(t.data)for(var i=0,a=Object.entries(t.data);i<a.length;i++){var r=a[i];n.searchParams.set(r[0],r[1])}e.open(t.method,n);try{e.send()}catch(e){t.callback(e)}}if(["POST","PUT"].includes(t.method)){if(!t.data)return;e.open(t.method,n),e.setRequestHeader("Content-Type","application/json");try{e.send(JSON.stringify(t.data))}catch(e){t.callback(e)}}if("PATCH"===t.method){if(!t.data)return;n.searchParams.set("id",t.data.id),e.open(t.method,n),e.setRequestHeader("Content-Type","application/json");try{e.send(JSON.stringify(t.data))}catch(e){t.callback(e)}}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e}var e,n,r;return e=t,(n=[{key:"getTickets",value:function(t){i({url:"".concat(this.url,"/tickets"),method:"GET",callback:function(e,n){n&&t.call(null,n)}})}},{key:"getTicket",value:function(t,e){i({url:"".concat(this.url,"/tickets"),method:"GET",data:{id:t},callback:function(t,n){n&&e.call(null,n)}})}},{key:"postTicket",value:function(t,e){i({url:"".concat(this.url,"/tickets"),method:"POST",responseType:"text",data:t,callback:function(t,n){n&&e.call(null,n)}})}},{key:"updateTicket",value:function(t,e){i({url:"".concat(this.url,"/tickets"),method:"PUT",responseType:"text",data:t,callback:function(t,n){n&&e.call(null,n)}})}},{key:"deleteTicket",value:function(t,e){i({url:"".concat(this.url,"/tickets"),method:"DELETE",responseType:"text",data:{id:t},callback:function(t,n){n&&e.call(null,n)}})}},{key:"setStatus",value:function(t,e,n){i({url:"".concat(this.url,"/tickets"),method:"PATCH",responseType:"text",data:{id:t,status:e},callback:function(t,e){e&&n.call(null,e)}})}}])&&a(e.prototype,n),r&&a(e,r),t}();function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){o=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=null,this.element=null,this.addEventListeners=[],this.editEventListeners=[],this.deleteEventListeners=[],this.ticketClickEventListeners=[],this.statusChangedEventListeners=[]}var e,n,i;return e=t,(n=[{key:"init",value:function(){if(!this.container)throw new Error("container not set");this.element=document.createElement("div"),this.element.id="help_desk_widget",this.element.classList.add("help_desk_widget"),this.container.appendChild(this.element),this.addButtonEl=document.createElement("div"),this.addButtonEl.id="ticket_add_btn",this.addButtonEl.classList.add("ticket_add_btn"),this.addButtonEl.textContent="Добавить тикет",this.element.appendChild(this.addButtonEl),this.ticketsAreaEl=document.createElement("div"),this.ticketsAreaEl.id="tickets_area",this.ticketsAreaEl.classList.add("tickets_area"),this.element.appendChild(this.ticketsAreaEl),this.addButtonEl.addEventListener("click",this.onAdd.bind(this)),this.ticketsAreaEl.addEventListener("click",this.onTicketsAreaClick.bind(this))}},{key:"update",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.from(this.ticketsAreaEl.children).forEach((function(t){return e.ticketsAreaEl.removeChild(t)}));var i,a=s(n);try{for(a.s();!(i=a.n()).done;){var r=i.value,o=document.createElement("div");o.classList.add("ticket"),o.setAttribute("data-id",r.id),this.ticketsAreaEl.appendChild(o);var c=document.createElement("div");c.classList.add("ticket_main"),o.appendChild(c);var l=document.createElement("div");l.classList.add("ticket_description"),l.textContent=r.description?r.description:"",o.appendChild(l);var u=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div");u.classList.add("ticket_status"),d.classList.add("ticket_name"),h.classList.add("ticket_time_stamp"),r.status&&u.classList.add("checked"),d.textContent=r.name,h.textContent=t.formatDate(new Date(r.created)),c.appendChild(u),c.appendChild(d),c.appendChild(h);var f=document.createElement("div");f.classList.add("ticket_action"),c.appendChild(f);var m=document.createElement("div");m.classList.add("ticket_edit"),f.appendChild(m);var p=document.createElement("div");p.classList.add("ticket_delete"),f.appendChild(p)}}catch(t){a.e(t)}finally{a.f()}}},{key:"toggleDescription",value:function(t){o(this.ticketsAreaEl.children).filter((function(e){return e.getAttribute("data-id")!==t.id})).forEach((function(t){return t.querySelector(".ticket_description").classList.remove("show")}));var e=this.ticketsAreaEl.querySelector('[data-id="'.concat(t.id,'"]')).querySelector(".ticket_description");e.textContent=t.description,e.classList.toggle("show")}},{key:"bindToDOM",value:function(t){this.container=t}},{key:"addOnAddEventListener",value:function(t){this.addEventListeners.push(t)}},{key:"addOnEditEventListener",value:function(t){this.editEventListeners.push(t)}},{key:"addOnDeleteEventListener",value:function(t){this.deleteEventListeners.push(t)}},{key:"addOnTicketClickEventListener",value:function(t){this.ticketClickEventListeners.push(t)}},{key:"addOnStatusChangedEventListener",value:function(t){this.statusChangedEventListeners.push(t)}},{key:"onTicketsAreaClick",value:function(t){var e=t.target.closest(".ticket").getAttribute("data-id");if(t.target.classList.contains("ticket_edit"))this.onEdit(e);else if(t.target.classList.contains("ticket_delete"))this.onDelete(e);else if(t.target.classList.contains("ticket_status")){var n=!t.target.classList.contains("checked");this.onStatusChanged(e,n)}else e&&this.onTicketClick(e)}},{key:"onAdd",value:function(){this.addEventListeners.forEach((function(t){return t.call(null)}))}},{key:"onEdit",value:function(t){this.editEventListeners.forEach((function(e){return e.call(null,t)}))}},{key:"onDelete",value:function(t){this.deleteEventListeners.forEach((function(e){return e.call(null,t)}))}},{key:"onTicketClick",value:function(t){this.ticketClickEventListeners.forEach((function(e){return e.call(null,t)}))}},{key:"onStatusChanged",value:function(t,e){this.statusChangedEventListeners.forEach((function(n){return n.call(null,t,e)}))}}])&&u(e.prototype,n),i&&u(e,i),t}();function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}d.formatDate=function(t){var e=function(t){return t<10?"0".concat(t):t},n=e(t.getDate()),i=e(t.getMonth()+1),a=e(t.getFullYear()%100),r=e(t.getHours()),o=e(t.getMinutes());return"".concat(n,".").concat(i,".").concat(a," ").concat(r,":").concat(o)};var f=function(){function t(e,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widget=n,this.ticketForm=i,this.confirmForm=a,this.server=e,this.tickets=[]}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.widget.addOnAddEventListener(this.onAdd.bind(this)),this.widget.addOnEditEventListener(this.onEdit.bind(this)),this.widget.addOnDeleteEventListener(this.onDelete.bind(this)),this.widget.addOnTicketClickEventListener(this.onTicketClick.bind(this)),this.widget.addOnStatusChangedEventListener(this.onStatusChanged.bind(this)),this.update()}},{key:"update",value:function(){var t=this;this.server.getTickets((function(e){t.tickets=e,t.widget.update(t.tickets)}))}},{key:"onAdd",value:function(){var t=this;this.ticketForm.show((function(e){var n={name:e.name,description:e.description,status:!1};t.ticketForm.hide(),t.server.postTicket(n,(function(){return t.update()}))}),(function(){return t.ticketForm.hide()}),{title:"Новый тикет"})}},{key:"onEdit",value:function(t){var e=this;this.server.getTicket(t,(function(t){e.ticketForm.show((function(n){e.ticketForm.hide(),e.server.updateTicket({id:t.id,name:n.name,description:n.description},(function(){return e.update()}))}),(function(){return e.ticketForm.hide()}),{title:"Редактирование тикета",name:t.name,description:t.description})}))}},{key:"onDelete",value:function(t){var e=this;this.confirmForm.show((function(){e.confirmForm.hide(),e.server.deleteTicket(t,(function(){return e.update()}))}),(function(){return e.confirmForm.hide()}),{message:"Вы уверены?<br>Тикет будет удален без возможности восстановления"})}},{key:"onTicketClick",value:function(t){var e=this,n=function(t){e.widget.toggleDescription(t)},i=this.tickets.find((function(e){return e.id===t}));i.description?n(i):this.server.getTicket(t,(function(t){i.description=t.description,n(i)}))}},{key:"onStatusChanged",value:function(t,e){var n=this;this.server.setStatus(t,e,(function(){return n.update()}))}}])&&h(e.prototype,n),i&&h(e,i),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=null,this.element=null,this.titleEl=null,this.closeButtons=[],this.submitListener=null,this.closeListener=null}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;this.element=document.createElement("form"),this.element.classList.add("ticket_modal","modal"),this.element.id="ticket_modal",this.element.innerHTML='\n      <div>\n        <a class="close_btn close" title="Закрыть">X</a>\n        <h3 class="title"></h3>\n        <div class="task_input">\n          <label class="task_name_title" for="task_name">Краткое описание</label>\n          <input class="task_name" type="text" id="task_name" placeholder="Введите краткое описание задачи" required>\n          <label class="task_description_title" for="task_description">Подробное описание</label>\n          <textarea class="task_description" type="text" rows="6" cols="54" placeholder="Введите подробное описание задачи "></textarea>\n          <div class="modal_footer">\n            <button type="button" class="cancel_btn close">Отмена</button>\n            <button type="submit" form="ticket_modal" class="ok_btn">Ok</button>\n          </div>\n        </div>\n      </div>\n    ',this.titleEl=this.element.querySelector(".title"),this.closeButtons=this.element.querySelectorAll(".close"),this.nameInput=this.element.querySelector(".task_name"),this.descriptionInput=this.element.querySelector(".task_description"),this.nameInput.addEventListener("input",this.validateName.bind(this)),this.element.addEventListener("submit",this.onSubmit.bind(this)),this.closeButtons.forEach((function(e){return e.addEventListener("click",t.onClose.bind(t))})),this.container.appendChild(this.element)}},{key:"validateName",value:function(){""===this.nameInput.value?this.nameInput.setCustomValidity("Поле не заполнено!"):this.nameInput.setCustomValidity("")}},{key:"show",value:function(t,e,n){this.titleEl.textContent=n.title?n.title:"Тикет",this.nameInput.value=n.name?n.name:"",this.descriptionInput.value=n.description?n.description:"",this.submitListener=t,this.closeListener=e,this.element.classList.add("show")}},{key:"hide",value:function(){this.submitListener=null,this.closeListener=null,this.element.classList.remove("show"),this.clear()}},{key:"clear",value:function(){this.titleEl.textContent="",this.nameInput.value="",this.descriptionInput.value=""}},{key:"onSubmit",value:function(t){t.preventDefault();var e={name:this.nameInput.value,description:this.descriptionInput.value};this.nameInput.checkValidity()&&this.submitListener&&this.submitListener.call(null,e)}},{key:"onClose",value:function(){var t={name:this.nameInput.value,price:this.descriptionInput.value};this.closeListener&&this.closeListener.call(null,t)}},{key:"bindToDOM",value:function(t){this.container=t}}])&&m(e.prototype,n),i&&m(e,i),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=null,this.element=null,this.messageEl=null,this.closeButtons=[],this.submitListener=null,this.closeListener=null}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;this.element=document.createElement("form"),this.element.classList.add("confirm_modal","modal"),this.element.id="confirm_modal",this.element.innerHTML='\n      <div>\n        <a class="close_btn close" title="Закрыть">X</a>\n        <h3 class="title">HelpDesk</h3>\n        <div class="task_input">\n          <div class="modal_footer">\n            <button type="button" class="cancel_btn close">Отмена</button>\n            <button type="button" class="ok_btn">Ok</button>\n          </div>\n        </div>\n      </div>\n    ',this.messageEl=this.element.querySelector(".title"),this.okButton=this.element.querySelector(".ok_btn"),this.closeButtons=this.element.querySelectorAll(".close"),this.okButton.addEventListener("click",this.onSubmit.bind(this)),this.closeButtons.forEach((function(e){return e.addEventListener("click",t.onClose.bind(t))})),this.container.appendChild(this.element)}},{key:"show",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{message:""};this.messageEl.innerHTML=n.message,this.submitListener=t,this.closeListener=e,this.element.classList.add("show")}},{key:"hide",value:function(){this.messageEl.innerHTML="",this.submitListener=null,this.closeListener=null,this.element.classList.remove("show"),this.clear()}},{key:"clear",value:function(){this.messageEl.textContent=""}},{key:"onSubmit",value:function(t){t.preventDefault(),this.submitListener&&this.submitListener.call(null)}},{key:"onClose",value:function(){this.closeListener&&this.closeListener.call(null)}},{key:"bindToDOM",value:function(t){this.container=t}}])&&v(e.prototype,n),i&&v(e,i),t}(),k=new r("https://alex-m18-ahj-http.herokuapp.com"),g=new p;g.bindToDOM(document.querySelector("body")),g.init();var y=new b;y.bindToDOM(document.querySelector("body")),y.init();var w=new d;w.bindToDOM(document.querySelector("#help_desk_container")),w.init(),new f(k,w,g,y).init()}]);